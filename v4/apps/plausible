{"captainVersion":4,"services":{"$$cap_appname-db":{"image":"postgres:$$cap_postgres_version","volumes":["$$cap_appname-db-data:/var/lib/postgresql/data"],"restart":"always","environment":{"POSTGRES_DB":"plausible","POSTGRES_USER":"plausible","POSTGRES_PASSWORD":"$$cap_db_password"}},"$$cap_appname-clickhouse":{"image":"clickhouse/clickhouse-server:$$cap_clickhouse_version","volumes":["$$cap_appname-clickhouse-data:/var/lib/clickhouse"],"restart":"always"},"$$cap_appname":{"image":"plausible/analytics:$$cap_plausible_version","restart":"always","command":"sh -c \"sleep 10 && /entrypoint.sh db createdb && /entrypoint.sh db migrate && /entrypoint.sh run\"","environment":{"BASE_URL":"http://$$cap_appname.$$cap_root_domain","SECRET_KEY_BASE":"$$cap_secret_key_base","DATABASE_URL":"postgres://plausible:$$cap_db_password@$$cap_appname-db:5432/plausible","CLICKHOUSE_DATABASE_URL":"http://$$cap_appname-clickhouse:8123/plausible"},"depends_on":["$$cap_appname-db","$$cap_appname-clickhouse"],"caproverExtra":{"containerHttpPort":8000}}},"caproverOneClickApp":{"variables":[{"id":"$$cap_plausible_version","label":"Plausible Version","defaultValue":"v2.0","description":"Check out their Docker page for the valid tags https://hub.docker.com/r/plausible/analytics/tags","validRegex":"/.{1,}/"},{"id":"$$cap_postgres_version","label":"PostgreSQL Version","defaultValue":"15"},{"id":"$$cap_clickhouse_version","label":"ClickHouse Version","defaultValue":"23.12"},{"id":"$$cap_db_password","label":"Database Password"},{"id":"$$cap_secret_key_base","label":"Secret Key Base","description":"Generate a random 64-character secret key."}],"instructions":{"start":"Deploying Plausible privacy-friendly analytics.","end":"Plausible has been deployed! Visit http://$$cap_appname.$$cap_root_domain to register your account."},"displayName":"Plausible Analytics","isOfficial":false,"description":"Privacy-friendly web analytics. Simple, lightweight, and GDPR-compliant alternative to Google Analytics."}}
